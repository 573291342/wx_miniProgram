## 小程序代码的构成

1. ### 了解项目的基本结构

   - **`pages`用来存放所有小程序的页面**
   - `utils`用来存放工具性质的模块（例如：格式化事件的自定义模块）
   - **`app.js`小程序项目的入口文件**
   - **`app.json`小程序项目的全局配置文件**
   - `app.wxss`小程序的全局样式文件
   - `project.config.json`项目的配置文件
   - `sitemap.json`用来配置小程序及其页面是否允许被微信索引

2. ### 小程序页面的组成部分

   小程序官方建议把所有小程序的页面，都存放在**pages目录**中，**以单独的文件夹**存在

   其中，每个页面由**4个基本文件**组成，它们分别是：

   - `.js`文件（页面的脚本文件，存放页面的数据、事件处理函数等）
   - `.json`文件（当前页面的配置文件，配置窗口外观、表现等）
   - `.wxml`文件（页面的模板结构文件）
   - `.wxss`文件（当前的样式表文件）

3. ### JSON配置文件的作用

   **JSON是一种数据格式**，在实际开发中，JSON总是以**配置文件**的形式出现。小程序项目中也不例外：通过不同的`.json`配置文件，可以对小程序项目进行不同级别的配置。

   小程序项目中有4种`.json`配置文件，分别是：

   1. 项目根目录中的`app.json`配置文件
   2. 项目根目录中的`project.config.json`配置文件
   3. 项目根目录中的`sitemap.json`配置文件
   4. **每个页面文件夹中的`.json`配置文件**

   - `app.json`文件

     `app.json`是当前小程序的**全局配置**，包括了小程序徐的**所有页面路径、窗口外观、界面表现、底部tab**等。

     pages:用来记录当前小程序所有页面的路径

     window：全局定义小程序所有页面的背景色、文字颜色等

     style:全局定义小程序组件所使用的样式版本

     sitemapLocation:用来指明sitemap.json的位置

   - `project.config.json`文件

     `project.config.json`是项目的配置文件，用来记录我们对小程序开发工具所做的个性化配置，例如：

     - setting中保存了编译相关的配置
     - projectname中保存的是项目名称
     - appid中保存的是小程序的账号ID

   - `sitemap.json`文件

     微信已开放小程序内搜索，效果类似于PC网页的SEO。sitemap.json文件用来配置小程序页面是否允许微信索引。

     `"action": "allow"`允许索引

     `"action": "disallow"`不允许索引

4. ### 页面的.json配置文件

   小程序中的每一个页面，可以使用.json文件来**对本页面的窗口外观进行配置，页面中的配置会覆盖app.json的window中相同的配置项**。

   ```js
   "navigationBarBackgroundColor": "#00b26a"
   
   //将导航栏的背景颜色改为绿色
   ```

5. ### 	新建小程序页面

   只需要在`app.json`->`pages`中新增页面的存放路径，小程序开发者工具即可帮我们自动创建对应的页面文件

   ```js
    "pages":[
   
     "pages/index/index",
   
     "pages/logs/logs",
   
     "pages/list/list"
   
    ],
   ```

   

6. ### 修改项目的首页

   只需要调整app.json->pages数组中页面路径的前后顺序，即可修改项目的首页。小程序会把第一位的页面，当作项目首页进行渲染。

    

   ```js
   "pages":[
   
     "pages/list/list",
   
     "pages/index/index",
   
     "pages/logs/logs"
   
    ],
   ```

7. ### 什么是wxml

   WXML(WeixXin MarKup Language)是小程序框架设计的一套标签语言，用来构建小程序页面的结构，其作用类似于网页开发中的HTML。

8. ### wxml和HTML的区别

   1. 标签名称不同
      - HTML(`div`,`span`,`img`,`a`)
      - WXML(`view`,`text`,`image`,`navigator`)
   2. 属性节点不同
      - `<a href="#">超链接</a>`
      - `<navigator url="/pages/home/home"></navigator>`
   3. 提供了类似于Vue中的模板语法
      - 数据绑定
      - 列表渲染
      - 条件渲染

9. ### 什么是wxss

   1. 新增了rpx尺寸单位
      - CSS中需要手动进行像素单位换算，例如rem
      - WXSS在底层支持新的尺寸单位rpx，在不同大小的屏幕上小程序会自动进行换算。
   2. 提供了全局样式和局部样式
      - 项目根目录中的app.wxss会作用于所有小程序页面。
      - 局部页面的.wxss样式仅对当前页面生效
   3. WXSS仅支持部分CSS选择器
      - .class和#id
      - element
      - 并集选择器，后代选择器
      - ::after和::before等伪类选择器

10. ### 小程序中的.js文件

    通过`.js`文件来处理用户的操作

    分类：

    1. `app.js`
       - 是**整个小程序项目的入口文件**，通过**调用App()函数**类启动整个小程序
    2. 页面的`.js`文件
       - 是**页面的入口文件**，通过调用**Page()函数**来创建并运行页面
    3. 普通的`.js`文件
       - 是**普通的功能模块文件**，用来封装**公共的函数或属性**供页面使用

## 小程序的宿主环境

1. ### 什么是宿主环境

   宿主环境是指程序运行所必须的依赖环境，例如Android和iOS

2. ### 小程序的宿主环境

   手机微信是小程序的宿主环境

   小程序可以**借助宿主环境提供的能力**，可以完成需索普通网页无法完成的功能，例如：微信扫码，微信支付，微信登录，地理定位。etc...

3. ### 小程序宿主环境包含的内容

   1. 通信模型
   2. 运行机制
   3. 组件
   4. API

4. ### 通信主体(渲染层和逻辑层)

   WXML模板和WXSS样式工作在渲染层

   js脚本工作在逻辑层

5. ### 小程序的通信模型

   1. **渲染层**和**逻辑层**之间的通信

      - 由微信客户端进行转发

   2. **逻辑层**和**第三方服务器**之间的通信

      - 由微信客户端进行转发

      ![image-20221025104540420](C:\Users\86136\AppData\Roaming\Typora\typora-user-images\image-20221025104540420.png)

## 生命周期

1. ### 什么是生命周期

   生命周期(Life Cycle)是指一个对象从创建->运行->销毁的整个阶段，强调的是一个时间段

   我们可以把每个小程序运行的过程，也概括为生命周期：

   - 小程序的启动，表示生命周期的开始
   - 小程序的关闭，表示生命周期的结束

2. ### 生命周期的分类

   在小程序中，生命周期分为两大类，分别是：

   1. 应用生命周期
      - 特指小程序从启动->运行->销毁的过程
   2. 页面生命周期
      - 特指小程序中，每个页面的加载->渲染->销毁的过程

   其中，页面的神明周期范围较小，应用程序的神明周期范围较大

   小程序启动->页面A的生命周期->页面B的生命周期->页面C的生命周期->etc...->小程序结束

3. ### 什么是生命周期函数

   **生命周期函数**：是由小程序框架提供的**内置函数，**会伴随着生命周期，**自动按次序执行**。

   **生命周期函数的作用**:允许程序员在**特定的时间点**、**执行某些特定的操作**。例如刚加载的时候，可以onLoad神明周期函数中初始化页面数据。

   注意：**生命周期**强调的是时间段，**生命周期函数**强调的是**时间点**

4. ### 生命周期函数的分类

   小程序中的生命周期函数的分类，分别是：

   1. **应用的生命周期函数**
      - 特指小程序从启动->运行->销毁期间依次调用的那些函数
   2. **页面的生命周期函数**
      - 特指小程序中，每个页面的加载->渲染->销毁依次调用的那些函数

5. ### 应用的生命周期函数